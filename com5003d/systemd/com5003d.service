[Unit]
Description=COM5003 daemon

# We cannot let modulemanager start after us - we are running on particular
# ZERA device only
Before=modulemanager.service
ConditionKernelCommandLine=zera_device=com5003

# Mandatory devices (see systemd.device / 'escaping' /
# https://lists.fedoraproject.org/pipermail/devel/2012-January/160917.html)
Requires=dev-zFPGA1reg.device
After=dev-zFPGA1reg.device
Requires=dev-i2c\x2d0.device
After=dev-i2c\x2d0.device

[Service]
ExecStart=/usr/bin/com5003d /etc/zera/com5003d/com5003d.xml
Type=notify
User=zera-services
NoNewPrivileges=true
ProtectHome=true
StandardOutput=journal
SyslogLevel=info

[Install]
WantedBy=multi-user.target
